<div>
  <h4>Permissions existantes</h4>
  <div class="text-right mb-3">
    <button class="btn btn-success mr-2" (click)="openNewPermissionsModal()">
      <fa-icon [icon]="plusIcon"></fa-icon>
      Ajouter...
    </button>
    <div class="btn-group">
      <button type="button"
              class="btn btn-secondary"
              (click)="previousPage()"
              [disabled]="page?.no === 1"
              [ngClass]="{'cursor-forbidden': page?.no === 1}">
        <fa-icon [icon]="previousIcon"></fa-icon>
      </button>
      <button type="button"
              class="btn btn-secondary"
              (click)="nextPage()"
              [disabled]="page?.no === page?.totalPages"
              [ngClass]="{'cursor-forbidden': page?.no === page?.totalPages}">
        <fa-icon [icon]="nextIcon"></fa-icon>
      </button>
    </div>
  </div>

  <app-permissions-table [ownerId]="entity?.ownerId" [subjsPerms]="page?.content"></app-permissions-table>
</div>

<div *ngIf="newSubjsPerms.length > 0" class="mt-5">
  <h4>Nouvelles permissions</h4>
  <app-permissions-table [ownerId]="entity?.ownerId" [subjsPerms]="newSubjsPerms" [removable]="true">
  </app-permissions-table>
</div>

<div class="text-right" *ngIf="newSubjsPerms.length > 0">
  <button class="btn btn-primary" (click)="emitPermissionsUpdate()" [disabled]="updating">
    <fa-icon *ngIf="updating" [icon]="spinnerIcon" spin="true"></fa-icon>
    <span *ngIf="updating"> Sauvegarde en cours</span>
    <span *ngIf="!updating"> Sauvegarder</span>
  </button>
</div>
