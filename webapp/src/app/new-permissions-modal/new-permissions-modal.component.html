<div class="modal-header">
  <h4 class="modal-title">Nouvelles permissions</h4>
  <fa-icon class="clickable" [icon]="closeIcon" (click)="activeModal.dismiss()" size="2x"></fa-icon>
</div>
<div class="modal-body">
  <div class="text-center" *ngIf="loading; else content">
    <fa-icon [icon]="spinnerIcon" spin="true" size="8x"></fa-icon>
  </div>

  <ng-template #content>
    <form [formGroup]="permsForm" (ngSubmit)="submit()" novalidate>
      <div class="form-group">
        <label for="user">Utilisateur</label>
        <select id="user"
                class="form-control"
                formControlName="userId"
                required
                [ngClass]="{'is-invalid': userId.invalid && (userId.dirty || userId.touched)}">
          <option *ngFor="let user of users" [value]="user.id">{{user.name}}</option>
        </select>
      </div>

      <div class="form-check">
        <input id="read" class="form-check-input" type="checkbox" formControlName="canRead">
        <label for="read" class="form-check-label">Lecture</label>
      </div>

      <div class="form-check">
        <input id="update" class="form-check-input" type="checkbox" formControlName="canUpdate">
        <label for="update" class="form-check-label">Modification</label>
      </div>

      <div class="form-check">
        <input id="delete" class="form-check-input" type="checkbox" formControlName="canDelete">
        <label for="delete" class="form-check-label">Suppression</label>
      </div>

      <div class="form-check">
        <input id="updatePermissions" class="form-check-input" type="checkbox" formControlName="canUpdatePermissions">
        <label for="updatePermissions" class="form-check-label">Modification des permissions</label>
      </div>

      <div class="text-right">
        <button type="submit"
                class="btn btn-primary"
                [disabled]="permsForm.invalid || loading"
                [ngClass]="{'cursor-forbidden': permsForm.invalid || loading}">
          <span *ngIf="!loading"> Ajouter</span>
          <fa-icon *ngIf="loading" [icon]="spinnerIcon" spin="true"></fa-icon>
          <span *ngIf="loading"> Ajout en cours...</span>
        </button>
      </div>
    </form>
  </ng-template>
</div>
